<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HR Admin Panel - Applications</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        /* CSS for the mobile menu button icon (Hamburger menu) */
        .mobile-menu-button-icon {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            width: 20px;
            height: 16px;
        }
        .mobile-menu-button-icon span {
            display: block;
            height: 2px;
            width: 100%;
            background-color: #3b82f6; /* blue-500 */
            transition: all 0.3s ease;
        }
        .mobile-menu-button-icon.active span:nth-child(1) {
            transform: translateY(7px) rotate(45deg);
        } 
        
        .mobile-menu-button-icon.active span:nth-child(2) {
            opacity: 0;
        }
        .mobile-menu-button-icon.active span:nth-child(3) {
            transform: translateY(-7px) rotate(-45deg);
        }
    </style>
</head>
<body class="bg-slate-950 text-slate-100">
    <header class="md:hidden flex justify-between items-center bg-slate-900 border-b border-slate-800 p-4">
        <h1 class="text-xl font-bold text-blue-400">HR Admin</h1>
        <button id="mobile-menu-button" class="text-blue-400 hover:text-blue-300 focus:outline-none">
            <div class="mobile-menu-button-icon">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </button>
    </header>

    <div class="flex h-screen overflow-hidden">
        <aside id="sidebar" class="w-64 bg-slate-900 border-r border-slate-800 p-6 overflow-y-auto **absolute md:relative z-40 h-full flex-shrink-0 transform -translate-x-full md:translate-x-0 transition-transform duration-300**">
            <div class="mb-8">
                <h1 class="text-2xl font-bold text-blue-400">HR Admin</h1>
                <p class="text-slate-400 text-sm mt-1">Manage your workforce</p>
            </div>

            <nav class="space-y-2 flex flex-col">
                <a href="index.html" class="nav-link **w-full block**" data-page="dashboard">
                    <span class="inline-block w-5 h-5 mr-3">üìä</span> Dashboard
                </a>
                <a href="vacancies.html" class="nav-link **w-full block**" data-page="vacancies">
                    <span class="inline-block w-5 h-5 mr-3">üíº</span> Vacancies
                </a>
                <a href="questions.html" class="nav-link **w-full block**" data-page="questions">
                    <span class="inline-block w-5 h-5 mr-3">‚ùì</span> Questions
                </a>
                <a href="applications.html" class="nav-link active **w-full block**" data-page="applications">
                    <span class="inline-block w-5 h-5 mr-3">üìã</span> Applications
                </a>
            </nav>
        </aside>

        <main class="flex-1 overflow-y-auto pt-4 md:pt-0">
            <div class="p-8">
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <h2 class="text-3xl font-bold mb-2">Applications</h2>
                        <p class="text-slate-400">Manage job applications</p>
                    </div>
                    <button id="addApplicationBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition">
                        + Add Application
                    </button>
                </div>

                <div class="bg-slate-900 border border-slate-800 rounded-lg overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-slate-800">
                                <tr>
                                    <th class="px-6 py-3 text-left text-sm font-semibold">Name</th>
                                    <th class="px-6 py-3 text-left text-sm font-semibold">Position</th>
                                    <th class="px-6 py-3 text-left text-sm font-semibold">Email</th>
                                    <th class="px-6 py-3 text-left text-sm font-semibold">Applied Date</th>
                                    <th class="px-6 py-3 text-left text-sm font-semibold">Status</th>
                                    <th class="px-6 py-3 text-left text-sm font-semibold">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="applicationsList" class="divide-y divide-slate-800">
                                </tbody>
                        </table>
                        <div id="noApplications" class="text-center py-8 text-slate-400">
                            No applications available
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="applicationModal" class="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 hidden overflow-y-auto">
        <div class="bg-slate-900 border border-slate-800 rounded-lg p-8 w-full max-w-md my-8">
            <h3 class="text-xl font-bold mb-6" id="modalTitle">Add Application</h3>
            
            <form id="applicationForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-semibold mb-2">Full Name</label>
                    <input type="text" id="applicantName" class="w-full bg-slate-800 border border-slate-700 rounded px-4 py-2 text-white focus:outline-none focus:border-blue-500" required>
                </div>

                <div>
                    <label class="block text-sm font-semibold mb-2">Email</label>
                    <input type="email" id="applicantEmail" class="w-full bg-slate-800 border border-slate-700 rounded px-4 py-2 text-white focus:outline-none focus:border-blue-500" required>
                </div>

                <div>
                    <label class="block text-sm font-semibold mb-2">Position Applied</label>
                    <input type="text" id="applicantPosition" class="w-full bg-slate-800 border border-slate-700 rounded px-4 py-2 text-white focus:outline-none focus:border-blue-500" required>
                </div>

                <div>
                    <label class="block text-sm font-semibold mb-2">Applied Date</label>
                    <input type="date" id="appliedDate" class="w-full bg-slate-800 border border-slate-700 rounded px-4 py-2 text-white focus:outline-none focus:border-blue-500" required>
                </div>

                <div>
                    <label class="block text-sm font-semibold mb-2">Status</label>
                    <select id="applicationStatus" class="w-full bg-slate-800 border border-slate-700 rounded px-4 py-2 text-white focus:outline-none focus:border-blue-500">
                        <option value="new">New</option>
                        <option value="reviewing">Reviewing</option>
                        <option value="accepted">Accepted</option>
                        <option value="rejected">Rejected</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-semibold mb-2">Cover Letter</label>
                    <textarea id="coverLetter" class="w-full bg-slate-800 border border-slate-700 rounded px-4 py-2 text-white focus:outline-none focus:border-blue-500 h-20"></textarea>
                </div>

                <div class="flex gap-4 mt-6">
                    <button type="submit" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded font-semibold transition">
                        Save
                    </button>
                    <button type="button" id="closeModal" class="flex-1 bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded font-semibold transition">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script>
        // NEW JAVASCRIPT FOR RESPONSIVE TOGGLE
        document.addEventListener('DOMContentLoaded', function() {
            loadApplications();
            setupEventListeners();
            
            const sidebar = document.getElementById('sidebar');
            const menuButton = document.getElementById('mobile-menu-button');
            const menuButtonIcon = document.querySelector('.mobile-menu-button-icon');

            if (menuButton) {
                menuButton.addEventListener('click', function() {
                    sidebar.classList.toggle('-translate-x-full');
                    menuButtonIcon.classList.toggle('active');
                });
            }
        });
        // END NEW JAVASCRIPT

        let editingId = null;
        // ... (rest of your application-specific JS functions remain unchanged) ...
        
        function setupEventListeners() {
            document.getElementById('addApplicationBtn').addEventListener('click', () => openModal());
            document.getElementById('closeModal').addEventListener('click', () => closeModal());
            document.getElementById('applicationForm').addEventListener('submit', handleSubmit);
        }

        function loadApplications() {
            const applications = JSON.parse(localStorage.getItem('applications')) || [];
            const tbody = document.getElementById('applicationsList');
            const noApplications = document.getElementById('noApplications');

            tbody.innerHTML = '';

            if (applications.length === 0) {
                noApplications.style.display = 'block';
                tbody.style.display = 'none';
                return;
            }

            noApplications.style.display = 'none';
            tbody.style.display = 'table-row-group';

            applications.forEach((app, index) => {
                const row = document.createElement('tr');
                const statusColor = app.status === 'new' ? 'bg-green-500/20 text-green-400' : 
                                     app.status === 'reviewing' ? 'bg-blue-500/20 text-blue-400' :
                                     app.status === 'accepted' ? 'bg-purple-500/20 text-purple-400' :
                                     'bg-red-500/20 text-red-400';
                
                row.innerHTML = `
                    <td class="px-6 py-3">${app.name}</td>
                    <td class="px-6 py-3">${app.position}</td>
                    <td class="px-6 py-3 text-sm text-slate-300">${app.email}</td>
                    <td class="px-6 py-3 text-sm text-slate-300">${new Date(app.appliedDate).toLocaleDateString()}</td>
                    <td class="px-6 py-3">
                        <span class="px-3 py-1 rounded-full text-xs font-semibold ${statusColor}">
                            ${app.status.charAt(0).toUpperCase() + app.status.slice(1)}
                        </span>
                    </td>
                    <td class="px-6 py-3 space-x-2">
                        <button onclick="editApplication(${index})" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition">Edit</button>
                        <button onclick="deleteApplication(${index})" class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm transition">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function openModal() {
            editingId = null;
            document.getElementById('modalTitle').textContent = 'Add Application';
            document.getElementById('applicationForm').reset();
            document.getElementById('appliedDate').valueAsDate = new Date();
            document.getElementById('applicationModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('applicationModal').classList.add('hidden');
            editingId = null;
        }

        function editApplication(index) {
            const applications = JSON.parse(localStorage.getItem('applications')) || [];
            const app = applications[index];
            
            editingId = index;
            document.getElementById('modalTitle').textContent = 'Edit Application';
            document.getElementById('applicantName').value = app.name;
            document.getElementById('applicantEmail').value = app.email;
            document.getElementById('applicantPosition').value = app.position;
            document.getElementById('appliedDate').value = app.appliedDate;
            document.getElementById('applicationStatus').value = app.status;
            document.getElementById('coverLetter').value = app.coverLetter || '';
            
            document.getElementById('applicationModal').classList.remove('hidden');
        }

        function deleteApplication(index) {
            if (confirm('Are you sure you want to delete this application?')) {
                const applications = JSON.parse(localStorage.getItem('applications')) || [];
                applications.splice(index, 1);
                localStorage.setItem('applications', JSON.stringify(applications));
                loadApplications();
            }
        }

        function handleSubmit(e) {
            e.preventDefault();
            
            const application = {
                name: document.getElementById('applicantName').value,
                email: document.getElementById('applicantEmail').value,
                position: document.getElementById('applicantPosition').value,
                appliedDate: document.getElementById('appliedDate').value,
                status: document.getElementById('applicationStatus').value,
                coverLetter: document.getElementById('coverLetter').value,
                id: editingId !== null ? JSON.parse(localStorage.getItem('applications'))[editingId].id : Date.now()
            };

            let applications = JSON.parse(localStorage.getItem('applications')) || [];

            if (editingId !== null) {
                applications[editingId] = application;
            } else {
                applications.push(application);
            }

            localStorage.setItem('applications', JSON.stringify(applications));
            closeModal();
            loadApplications();
        }
    </script>
</body>
</html>